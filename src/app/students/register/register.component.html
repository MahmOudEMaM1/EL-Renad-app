<body>
    <div class="register-container">
        <div class="language-toggle-container">
            <app-language-toggle></app-language-toggle>
        </div>
        <mat-card>
            <mat-card-header>
                <div class="logo-container">
                    <img [src]="image2Path" alt="El-Renad Logo" class="logo">
                </div>
            </mat-card-header>
            <div class="title-container">
                <mat-card-title>{{ 'register.title' | translate }}</mat-card-title>
            </div>
            <mat-card-content>
                <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
                    <div class="form-grid">
                        <mat-form-field appearance="fill">
                            <mat-label>{{ 'register.username' | translate }}</mat-label>
                            <input matInput formControlName="name" required>
                            <mat-error *ngIf="registerForm.get('name')?.errors?.['required']">{{ 'register.username_required' | translate }}</mat-error>
                        </mat-form-field>

                        <mat-form-field appearance="fill">
                            <mat-label>{{ 'register.identify' | translate }}</mat-label>
                            <input matInput formControlName="identify" required>
                            <mat-error *ngIf="registerForm.get('identify')?.errors?.['required']">{{ 'register.identify_required' | translate }}</mat-error>
                        </mat-form-field>

                        <mat-form-field appearance="fill">
                            <mat-label>{{ 'register.father_name' | translate }}</mat-label>
                            <input matInput formControlName="fatherName" required>
                            <mat-error *ngIf="registerForm.get('fatherName')?.errors?.['required']">{{ 'register.father_name_required' | translate }}</mat-error>
                        </mat-form-field>

                        <mat-form-field appearance="fill">
                            <mat-label>{{ 'register.password' | translate }}</mat-label>
                            <input matInput type="password" formControlName="password" required>
                            <mat-error *ngIf="registerForm.get('password')?.errors?.['required']">{{ 'register.password_required' | translate }}</mat-error>
                        </mat-form-field>

                        <mat-form-field appearance="fill">
                            <mat-label>{{ 'register.age' | translate }}</mat-label>
                            <input matInput type="number" formControlName="age" required>
                            <mat-error *ngIf="registerForm.get('age')?.errors?.['required']">{{ 'register.age_required' | translate }}</mat-error>
                            <mat-error *ngIf="registerForm.get('age')?.errors?.['min']">{{ 'register.age_min' | translate }}</mat-error>
                            <mat-error *ngIf="registerForm.get('age')?.errors?.['max']">{{ 'register.age_max' | translate }}</mat-error>
                        </mat-form-field>

                        <mat-form-field appearance="fill">
                            <mat-label>{{ 'register.gender' | translate }}</mat-label>
                            <mat-select formControlName="gender" required>
                                <mat-option value="male">{{ 'register.gender_male' | translate }}</mat-option>
                                <mat-option value="female">{{ 'register.gender_female' | translate }}</mat-option>
                            </mat-select>
                            <mat-error *ngIf="registerForm.get('gender')?.errors?.['required']">{{ 'register.gender_required' | translate }}</mat-error>
                        </mat-form-field>

                        <mat-form-field appearance="fill">
                            <mat-label>{{ 'register.email' | translate }}</mat-label>
                            <input matInput type="email" formControlName="email" required>
                            <mat-error *ngIf="registerForm.get('email')?.errors?.['required']">{{ 'register.email_required' | translate }}</mat-error>
                            <mat-error *ngIf="registerForm.get('email')?.errors?.['email']">{{ 'register.email_invalid' | translate }}</mat-error>
                        </mat-form-field>

                        <mat-form-field appearance="fill">
                            <mat-label>{{ 'register.phone1' | translate }}</mat-label>
                            <input matInput formControlName="phoneNumber1" required>
                            <mat-error *ngIf="registerForm.get('phoneNumber1')?.errors?.['required']">{{ 'register.phone_required' | translate }}</mat-error>
                            <mat-error *ngIf="registerForm.get('phoneNumber1')?.errors?.['pattern']">{{ 'register.phone_invalid' | translate }}</mat-error>
                        </mat-form-field>

                        <mat-form-field appearance="fill">
                            <mat-label>{{ 'register.phone2' | translate }}</mat-label>
                            <input matInput formControlName="phoneNumber2" required>
                            <mat-error *ngIf="registerForm.get('phoneNumber2')?.errors?.['required']">{{ 'register.phone_required' | translate }}</mat-error>
                            <mat-error *ngIf="registerForm.get('phoneNumber2')?.errors?.['pattern']">{{ 'register.phone_invalid' | translate }}</mat-error>
                        </mat-form-field>

                        <div>
                            <mat-label>{{ 'register.photo' | translate }}</mat-label>
                            <input type="file" accept="image/*" (change)="onFileSelected($event)">
                            <mat-error *ngIf="registerForm.get('photo')?.errors?.['required']">{{ 'register.photo_required' | translate }}</mat-error>
                        </div>
                    </div>

                    <div *ngIf="error" class="error-message">
                        {{ error | translate }}
                    </div>

                    <div class="button-container">
                        <button mat-raised-button color="primary" type="submit" [disabled]="loading || registerForm.invalid">
                            <mat-spinner diameter="20" *ngIf="loading"></mat-spinner>
                            <span *ngIf="!loading">{{ 'register.button' | translate }}</span>
                        </button>
                        <button mat-button type="button" color="accent" (click)="goToLogin()">
                            {{ 'register.login' | translate }}
                        </button>
                    </div>
                </form>
            </mat-card-content>
        </mat-card>
    </div>
</body>